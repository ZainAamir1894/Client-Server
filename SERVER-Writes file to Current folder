import java.io.*;
import java.net.*;

public class FileServer{
    public static void main(String[] args) throws Exception {
        ServerSocket serverSocket = new ServerSocket(9090);
        System.out.println("Server Online! Waiting to receive files.");

        try{
            Socket client = serverSocket.accept();
            System.out.println("Client Connected!");

            BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
            PrintWriter out = new PrintWriter(client.getOutputStream(), true);


            //Reading file name with extension e.g EVE01Sales.txt
            String name = in.readLine();
                System.out.println(name);
                out.println("Please wait while the file is being processed...");

                //Creates a file in Current folder with RECEIVED_EVE01Sales.txt
                FileWriter fileWriter = new FileWriter("RECEIVED_" + name);


                //Writing the content
                String line = in.readLine();
                while((line) != null){
                    fileWriter.write(line);
                    fileWriter.write("\n");

                    line = in.readLine();
                    
                }
                fileWriter.close();
            
                
                client.close();
                serverSocket.close();
            
        } catch(IOException e){
            System.out.println("Error parsing File.");
        }
    }
}
